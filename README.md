# Typescript-typer demo

### Alternativer

#### tRPC
(typescript Remote Procedure Call). Avhenger av at man har typescript både i backend og frontend. 
Lager RPC-aktige kall som ligner på måten openapi-generator gjør det:  

```typescript
const appRouter = router({
    user: {
        list: publicProcedure.query(async () => {
            // Retrieve users from a datasource, this is an imaginary database
            const users = await db.user.findMany();
            return users;
        }),
        byId: publicProcedure.input(z.string()).query(async (opts) => {
            const { input } = opts;
            // Retrieve the user with the given ID
            const user = await db.user.findById(input);
            return user;
        }),
        create: publicProcedure
            .input(z.object({ name: z.string() }))
            .mutation(async (opts) => {
                const { input } = opts;
                // Create a new user in the database
                const user = await db.user.create(input);
                return user;
            }),
    },
    examples: {
        iterable: publicProcedure.query(async function* () {
            for (let i = 0; i < 3; i++) {
                await new Promise((resolve) => setTimeout(resolve, 500));
                yield i;
            }
        }),
    },
});

// Brukes slik:
const users = await trpc.user.list.query();
console.log('Users:', users);

const createdUser = await trpc.user.create.mutate({ name: 'sachinraja' });
console.log('Created user:', createdUser);

const user = await trpc.user.byId.query('1');
console.log('User 1:', user);
```

#### Openapi-typescript

Genererer typer basert på openapi-spec:
```typescript
import type { paths, components } from "./my-openapi-3-schema"; // generated by openapi-typescript

// Schema Obj
type MyType = components["schemas"]["MyType"];

// Path params
type EndpointParams = paths["/my/endpoint"]["parameters"];

// Response obj
type SuccessResponse =
paths["/my/endpoint"]["get"]["responses"][200]["content"]["application/json"]["schema"];
type ErrorResponse =
paths["/my/endpoint"]["get"]["responses"][500]["content"]["application/json"]["schema"];
```

